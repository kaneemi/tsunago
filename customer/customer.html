<!DOCTYPE html>
<html>
â€‹

<head>
    <title>é¡§å®¢</title>
    <link rel="stylesheet" type="text/css" href="customer.css">
</head>
<hr>
<h1>TSUNAGO</h1>
<hr>
â€‹

<body>
    <!-- HTML -->
    <div id="app" style="width:100%">
        <!-- <header id="header">
      <img src="images/top.jpg" alt="">
      <div id="slogan">
        <h1>TSUNAGO</h1>
      </div>
    </header> -->

        <h2>å•†å“ãƒªã‚¹ãƒˆ</h2>
        <div class="search">
            <input type="text" v-model="searchedTag">
            <button @click="search">æ¤œç´¢ğŸ”</button>
            <button @click="cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        </div>
        <table>
             <!--searchModeã¯æ¤œç´¢ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¾ã§ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã•ã›ã‚‹ã€‚æ¤œç´¢ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã‚‹ã¨trueã€ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã‚‹ã‹ãƒ•ã‚©ãƒ¼ãƒ ãŒç©ºæ¬„ã«ãªã£ãŸã‚‰falseã«ãªã‚‹ã€‚
             d.tagName.indexOf(searchedTag)ã¯ã€tagNameã®ä¸­ã«searchedTagãŒå«ã¾ã‚Œãªã‹ã£ãŸã‚‰-1ã‚’è¿”ã™ -->

            <template v-for="(d, i) in data" v-if="(!searchMode) || searchMode && d.tagName.indexOf(searchedTag) != -1">
                <tr>
                    <td rowspan="5" style="text-align: center;">
                        <img style="width:200px" :src="d.img">
                    </td>
                    <td>
                        å•†å“åï¼š{{d.tagName}}
                    </td>
                </tr>
                <tr>
                    <td>
                        å•†å“ã‚«ãƒ†ã‚´ãƒªï¼š{{d.category}}
                    </td>
                </tr>
                <tr>
                    <td>
                        å»ƒæ£„äºˆå®šæ—¥ï¼š{{d.deadline}}
                    </td>
                </tr>
                <tr>
                    <td>
                        ä¾¡æ ¼ï¼š{{d.price}}å††ï¼ˆ{{d.discount}}ï¼‰
                    </td>
                </tr>
                <tr>
                    <td>
                        è²©å£²å ´æ‰€ï¼š{{d.overView}}
                    </td>
                </tr>
                <tr>
                    <td colspan="2" style="text-align: center;">
                        <button @click="reserve(i)">äºˆç´„</button>
                    </td>
                </tr>
                <tr>
                    <td class="space" colspan="2">&nbsp;</td>
                </tr>
            </template>
        </table>
    </div>
    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
        let app = new Vue({
            el: '#app',
            data: {
                data: [],
                searchedTag: '',
                searchMode: false
            },
            mounted: function() {
                let savedata = JSON.parse(localStorage.getItem('save'));
                if (savedata != null) {
                    this.data = JSON.parse(localStorage.getItem('save'));
                }
            },
            methods: {
                reserve: function(i) {
                    let conf = window.confirm('æœ¬å½“ã«äºˆç´„ã—ã¾ã™ã‹ï¼Ÿ');
                    if (!conf) {
                        return;
                    }
                    console.log(this.data[i]);
                    this.data.splice(i, 1);
                    localStorage.setItem('save', JSON.stringify(this.data));
                },

                search: function() {
                    this.searchMode = true;
                },

                cancel: function() {
                    this.searchMode = false;
                    this.searchedTag = '';
                }
            },

            /* watchãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€å¤‰æ•°ãŒå¤‰æ›´ã•ã‚Œã‚‹ãŸã³ã«å‘¼ã³å‡ºã•ã‚Œã‚‹é–¢æ•°ã‚’å®šç¾©ã§ãã‚‹ */
            watch: {
                // searchedTagãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨å‘¼ã³å‡ºã•ã‚Œã‚‹ï¼ˆæ¤œç´¢æ–‡å­—ãŒã™ã¹ã¦æ¶ˆã•ã‚ŒãŸã‚‰æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ã‚’ã‚„ã‚ã‚‹ï¼‰
                searchedTag: function() {
                    if (this.searchedTag == '') {
                        this.searchMode = false;
                    }
                }
            }
        });

    </script>
</body>
